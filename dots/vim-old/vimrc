" design by wgao. {{{

" vim init. {{{
function! Sync_repo(Dir, Remote, Branch)
    if ! isdirectory(a:Dir)
        echo a:Dir
        call system("mkdir -p " . a:Dir)
        call system("git clone -b " . a:Branch . ' ' . a:Remote . ' ' . a:Dir)
    else
        call system("cd " . a:Dir . " && git pull origin " . a:Branch)

    endif
endfunction

function! VIM_init()
   call Sync_repo("$HOME/.vim/bundle/spf13-vim", "https://github.com/spf13/spf13-vim.git", "3.0")
   call Sync_repo("$HOME/.vim/bundle/vundle", "https://github.com/gmarik/vundle.git", "master")
    " vim -u      "$HOME/.vimrc" "+set nomore" "+BundleInstall!" "+qall"
    " vim -u      "$HOME/.vimrc" "+set nomore" "+BundleInstall!" "+BundleClean" "+qall"
endfunction
" }}}

" check vundle. {{{
if ! isdirectory($HOME."/.vim/bundle/vundle")
        echo "setup vundle frist!"
        call VIM_init()
endif
" }}}
"
" spf13 before. {{{
    "===============================================================================+
    set nocompatible        " Must be first line
    "===============================================================================+
" }}}

" add my before config here. {{{
    "===============================================================================+
    " let g:spf13_bundle_groups=['general', 'writing', 'programming', 'python', 'misc',]
    let g:spf13_bundle_groups=['general', 'writing', 'programming', 'youcompleteme', 'python', 'misc',]
    "===============================================================================+
" }}}

" spf13 vundle. {{{
    "===============================================================================+
    source ~/.vim/bundle/spf13-vim/.vimrc.bundles
    "===============================================================================+
" }}}

" add my bundles here. {{{

    "==================================================
    " Brief help
    " :BundleList          - list configured bundles
    " :BundleInstall(!)    - install(update) bundles
    " :BundleSearch(!) foo - search(or refresh cache first) for foo
    " :BundleClean(!)      - confirm(or auto-approve) removal of unused bundles

    " åˆ·æ–°æ’ä»¶
    nmap <F6> :BundleInstall<cr>
    " æ›´æ–°æ’ä»¶
    nmap <S-F6> :BundleList<cr>

    " -------------------------------------------------
    "  has been integrate into spf13.
    " -------------------------------
    " å…è®¸ä½ åœ¨ Vimä¸­æŒ‰ç­‰å·ã€å†’å·ã€è¡¨æ ¼ç­‰æ¥å¯¹é½æ–‡æœ¬
    " 'Tabular'
    " ex: :TAb /=
    " -------------------------------
    " æ‰©å±•äº†vimçš„%åŠŸèƒ½,è®©%å¯ä»¥åŒ¹é…çš„,
    " ä¸å†ä»…ä»…æ˜¯æ‹¬å·,æ”¯æŒå¤šç§è¯­è¨€.å¿…å¤‡æ’ä»¶ä¹‹ä¸€
    " 'matchit.zip'
    " % æ­£å‘åŒ¹é…      g% åå‘åŒ¹é…
    " [% å®šä½å—é¦–     ]% å®šä½å—å°¾
    " -------------------------------
    " -------------------------------
    " -------------------------------
    " -------------------------------
" -------------------------------------------------
" good.
" -------------------------------------------------
    " Vim8 å¼‚æ­¥è¿è¡Œshell
    Bundle 'skywind3000/asyncrun.vim'
    " -------------------------------------------------
    " VimDevIcons - Add Icons to Your Plugins
    Bundle 'ryanoasis/vim-devicons'
    " -------------------------------------------------
    " æŸ¥çœ‹å’Œè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶çš„ç¼–ç æ ¼å¼
    Bundle 'mbbill/fencview'
    let g:fencview_autodetect=1
    " Bundle 's3rvac/AutoFenc'
    " -------------------------------------------------
    " æ”¯æŒåˆ†æ”¯çš„ undo
    " Bundle 'sjl/gundo.vim'
    " è°ƒç”¨ gundo æ ‘
    " nnoremap <Leader>ud :GundoToggle<CR>
    " -------------------------------------------------
    " æ˜¾ç¤ºç¼©è¿›å¯¹é½çº¿
    Bundle 'Yggdroot/indentLine'
    let g:indentLine_char = 'â”Š'
    " map <leader>il :IndentLinesToggle<CR>
    " -------------------------------------------------
    " æ˜¾ç¤ºgit diffçš„æ’ä»¶
    Bundle 'airblade/vim-gitgutter'
    " -------------------------------------------------
    if ! isdirectory($HOME."/.vim/bundle/wim")
	:!ln -sf $VDOT/plugins/vim-plugin/wim $HOME/.vim/bundle/wim
    endif
    if isdirectory($HOME."/.vim/bundle/wim")
       Bundle 'wim'
        source ~/.vim/bundle/wim/plugin/vfunc.vim
    endif
    " -------------------------------------------------
    " vimå¸®åŠ©ä¸­æ–‡ç‰ˆ
    " Bundle 'becaning/vimdoccn'
    Bundle 'yianwillis/vimcdoc'
    " -------------------------------------------------
    "è®©Vimå˜æˆæ‰€è§å³æ‰€å¾—çš„MarkDownæ–‡ä»¶ç¼–è¾‘å™¨ï¼Œå¯ä»¥åœ¨ç¼–è¾‘æ—¶é¢„è§ˆæœ€ç»ˆæ•ˆæœã€‚
    Bundle 'iamcco/markdown-preview.vim'
    let g:mkdp_path_to_chrome = "firefox"
    " let g:mkdp_auto_start = 1
    let g:mkdp_auto_open = 1
    let g:mkdp_command_for_global = 1
    " -------------------------------------------------
    " show color, like red yellow #066
    Bundle 'gko/vim-coloresque'
    " -------------------------------------------------
    " åŒæ—¶é«˜äº®å¤šä¸ªå•è¯ usage
    Bundle 'Mark--Karkat'
    " <leader>m  mark or unmark the word under (or before) the cursor
    " <leader>r  manually input a regular expression. ç”¨äºæœç´¢.
    " <leader>n  clear this mark (i.e. the mark under the cursor), or clear all highlighted marks .
    " <leader>*  å½“å‰MarkWordçš„ä¸‹ä¸€ä¸ª     <leader>#  å½“å‰MarkWordçš„ä¸Šä¸€ä¸ª
    " <leader>/  æ‰€æœ‰MarkWordsçš„ä¸‹ä¸€ä¸ª    <leader>?  æ‰€æœ‰MarkWordsçš„ä¸Šä¸€ä¸ª
    " -------------------------------------------------
    " æœ€å¤§åŒ–å½“å‰panel.
    Bundle 'troydm/zoomwintab.vim'
    " -------------------------------------------------
    " å¦ä¸€ç§å¯¹é½æ–¹å¼
    Bundle 'junegunn/vim-easy-align'
    nmap ga <Plug>(EasyAlign)
    xmap ga <Plug>(EasyAlign)
    " -------------------------------------------------
    " æ’ç‰ˆ
    " Bundle 'Chiel92/vim-autoformat'
    Bundle 'rhysd/vim-clang-format'
    " let g:clang_format#code_style = "chromium"
    let g:clang_format#style_options = {
            \ 'AllowShortIfStatementsOnASingleLine' : 'false',
            \ "BreakBeforeBraces" : "Linux"}
    " -------------------------------------------------
    " end è‡ªåŠ¨è¡¥å…¨
    Bundle 'tpope/vim-endwise'
    " -------------------------------------------------
    " gitk
    Bundle 'gregsexton/gitv'
    " -------------------------------------------------
" -------------------------------------------------
" unuseful
" -------------------------------------------------
    " æ—¥å†æ’ä»¶,æœ‰äº†å®ƒ,ç”¨vimæ¥å†™æ—¥è®°å¾ˆæ–¹ä¾¿
    " Bundle 'itchyny/calendar.vim'
    " let g:calendar_frame = 'default'
    " -------------------------------------------------
    " View man pages in vim. Grep for the man pages.
    " Bundle 'vim-utils/vim-man'
    " -------------------------------------------------
    " ä¸ºå°æ‹¬å·åŠ å¦‚å½©è™¹æ•ˆæœï¼Œä½†å¯¹cè²Œä¼¼æ²¡å•¥æ„ä¹‰...
    Bundle 'kien/rainbow_parentheses.vim'
    let g:rbpt_colorpairs = [
		\ ['brown',       'RoyalBlue3'],
		\ ['Darkblue',    'SeaGreen3'],
		\ ['darkgray',    'DarkOrchid3'],
		\ ['darkgreen',   'firebrick3'],
		\ ['darkcyan',    'RoyalBlue3'],
		\ ['darkred',     'SeaGreen3'],
		\ ['darkmagenta', 'DarkOrchid3'],
		\ ['brown',       'firebrick3'],
		\ ['gray',        'RoyalBlue3'],
		\ ['black',       'SeaGreen3'],
		\ ['darkmagenta', 'DarkOrchid3'],
		\ ['Darkblue',    'firebrick3'],
		\ ['darkgreen',   'RoyalBlue3'],
		\ ['darkcyan',    'SeaGreen3'],
		\ ['darkred',     'DarkOrchid3'],
		\ ['red',         'firebrick3'],
		\ ]
    let g:rbpt_max = 16
    let g:rbpt_loadcmd_toggle = 0
    " au VimEnter * RainbowParenthesesToggle
    " au Syntax * RainbowParenthesesLoadRound
    " au Syntax * RainbowParenthesesLoadSquare
    " au Syntax * RainbowParenthesesLoadBraces
    " -------------------------------------------------
    " åœ¨vimé‡Œç”»å›¾
    " Bundle 'DrawIt'
    " -------------------------------------------------
    " -------------------------------------------------
" -------------------------------------------------
" dealing
" -------------------------------------------------
    " cscopeçš„vimæ’ä»¶,æä¾›å¿«æ·é”®æ“çºµcscope
    " Bundle 'chazy/cscope_maps'
    " Bundle 'cscope_macros.vim'
    " set cscopetag
    " set cscopeverbose
    " set cscopequickfix=c-,d-,e-,g-,i-,s-,t-
    " set cscopetagorder=1
    " set nocsverb "å¢åŠ  cscope æ•°æ®åº“æ—¶ï¼Œä¸ç»™å‡ºæ¶ˆæ¯
    " -------------------------------------------------
    " Bundle 'charz/multi-cscope-db'
    " Bundle 'brookhong/cscope.vim'
    " nnoremap <leader>fa :call CscopeFindInteractive(expand('<cword>'))<CR>
    " nnoremap <leader>l :call ToggleLocationList()<CR>
    " -------------------------------------------------
    " Bundle 'rking/ag.vim'
    " let g:ag_prg="<custom-ag-path-goes-here> --vimgrep"
    " let g:ag_working_path_mode="r"
    " Bundle 'Chun-Yang/vim-action-ag'
    " -------------------------------------------------
    " è®©ä¹¦ç­¾å¯è§†åŒ–çš„æ’ä»¶
    Bundle 'kshenoy/vim-signature'
    " -------------------------------------------------
    " ä»»åŠ¡åˆ—è¡¨çš„æ’ä»¶ â€”â€” TaskList.vimï¼Œæ–¹ä¾¿ç®¡ç†é¡¹ç›®ä¸­çš„ TODOã€FIXME ç­‰æ ‡ç­¾.
    " Bundle 'TaskList.vim'
    " nnoremap <leader>v <Plug>TaskList
    " -------------------------------------------------
    " repeat æ”¯æŒä½¿ç”¨.æ¥é‡å¤æ‰§è¡Œä¸€äº›æ’ä»¶çš„å‘½ä»¤ï¼ˆå¦‚speeddating, surroundç­‰)
    " Bundle 'repeat.vim'
    " -------------------------------------------------
    " å¯ä»¥åœ¨vimå’Œtmuxçš„ä»»ä½•ç»„åˆé—´æ— ç¼åˆ‡æ¢
    " Bundle 'christoomey/vim-tmux-navigator'
    " -------------------------------------------------
    " have bug.
    " Bundle 'terryma/vim-expand-region'
    " vmap v <Plug>(expand_region_expand)
    " vmap <C-v> <Plug>(expand_region_shrink)
    " -------------------------------------------------
    " -------------------------------------------------
    " -------------------------------------------------
    " ç¼©è¿›ä»£æ›¿
    " Bundle 'tpope/vim-sleuth'
    " -------------------------------------------------
    " ä¼šé€ æˆ/ä¸å¥½ç”¨
    " Bundle 'haya14busa/incsearch.vim'
    " map /  <Plug>(incsearch-forward)
    " -------------------------------------------------
    " color themeæµè§ˆæ’ä»¶,åˆ—å‡ºæ‰€æœ‰çš„vim color themeåˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­,é€‰ä¸­åæŒ‰å›è½¦å³å¯åº”ç”¨
    " Bundle 'sjas/csExplorer'
    " -------------------------------------------------
    " æ‰“å¼€quickfixå¿«æ·é”®
    Bundle 'Valloric/ListToggle'
    " let g:lt_location_list_toggle_map = '<leader>ff'
    let g:lt_quickfix_list_toggle_map = '<leader>qq'
    let g:lt_height = 10
    " -------------------------------------------------
    " vimä¸­æ‰“å¼€ç»ˆç«¯çš„åŠŸèƒ½+
    " Bundle 'Shougo/vimshell.vim'
    " Please install vimproc Ver.6.0 or above.
    " Bundle 'Shougo/vimproc'
    " -------------------------------------------------
    " -------------------------------------------------
    " Bundle 'haya14busa/vim-poweryank'
    " map <Leader>y <Plug>(operator-poweryank-osc52)
    " -------------------------------------------------
    " -------------------------------------------------
    Bundle 'Xuyuanp/nerdtree-git-plugin'
    let g:NERDTreeIndicatorMapCustom = {
    \ "Modified" : "âœ¹",
    \ "Staged" : "âœš",
    \ "Untracked" : "âœ­",
    \ "Renamed" : "âœ",
    \ "Unmerged" : "â•",
    \ "Deleted" : "âœ–",
    \ "Dirty" : "âœ—",
    \ "Clean" : "âœ”ï¸",
    \ 'Ignored' : 'â˜’',
    \ "Unknown" : "?"
    \ }
    " -------------------------------------------------
    " -------------------------------------------------
    " Bundle 'jeaye/color_coded'
    " let g:color_coded_enabled = 1
    " let g:color_coded_filetypes = ['c', 'cpp', 'objc']
    " -------------------------------------------------
    " Bundle 'kassio/neoterm'
    " Bundle 'wincent/terminus'
    " -------------------------------------------------
    " Bundle 'rdnetto/YCM-Generator'
    " éœ€è¦å°†clang+llvmåŠ å…¥åˆ°PATHä¸­
    "nnoremap <leader>hf :YcmGenerateConfig<CR>
    " -------------------------------------------------
    Bundle 'Shougo/deoplete.nvim'
    " -------------------------------------------------
    "requires Vim to be compiled with Ruby support
    "Bundle 'wincent/command-t'
    "let g:CommandTMaxHeight = 15
    "noremap <leader>j :CommandT<cr>
    "noremap <leader>y :CommandTFlush<cr>
    " -------------------------------------------------
    " ç”±æ³¨é‡Šç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆå‡½æ•°æ ‡å‡†æ³¨é‡Š
    Bundle 'DoxygenToolkit.vim'
    let g:DoxygenToolkit_authorName="wei.gao ingenic"
    let g:DoxygenToolkit_briefTag_funcName="yes"
    map <leader>da :DoxAuthor<CR>
    map <leader>df :Dox<CR>
    " map <leader>db :DoxBlock<CR>
    let g:DoxygenToolkit_licenseTag="My own license\<enter>"
    let g:DoxygenToolkit_undocTag="DOXIGEN_SKIP_BLOCK"
    let g:DoxygenToolkit_briefTag_pre = "@brief\t"
    let g:DoxygenToolkit_paramTag_pre = "@param\t"
    let g:DoxygenToolkit_returnTag = "@return\t"
    let g:DoxygenToolkit_maxFunctionProtoLines = 30
    " -------------------------------------------------
    "åˆ—å‡ºæœ€è¿‘æ‰“å¼€è¿‡çš„æ–‡ä»¶
    " Bundle 'mhinz/vim-startify'
    " -------------------------------------------------
    "Bundle 'cctree'             " å¯ä»¥æŸ¥çœ‹functionçš„call tree
    " -------------------------------------------------
    if executable('ack')
        " Bundle 'dyng/ctrlsf.vim'
	" " vmap <C-E>a <Plug>CtrlSFVwordPath
	" let g:ctrlsf_default_root = 'project'
    endif
    " -------------------------------------------------
    " Bundle 'dkprice/vim-easygrep'
    " let g:EasyGrepMode = 2     " All:0, Open Buffers:1, TrackExt:2,
    " let g:EasyGrepCommand = 0  " Use vimgrep:0, grepprg:1
    " let g:EasyGrepRecursive  = 1 " Recursive searching
    " let g:EasyGrepIgnoreCase = 1 " not ignorecase:0
    " let g:EasyGrepFilesToExclude = "*.bak, *~, cscope.*, *.a, *.o, *.pyc, *.bak"
    " -------------------------------------------------
    " å·¥ç¨‹å†…æŸ¥æ‰¾ä¸æ›¿æ¢+
    " Bundle 'grep.vim'
    " -------------------------------------------------
    " Switch very quickly between your most recently used buffers
    " if has("ruby")
	" Bundle 'LustyJuggler'
    " endif
    " -------------------------------------------------
    " ä½¿ç”¨èœå•å’Œçƒ­é”®æ¥ç¼–å†™å’Œæ‰§è¡ŒBASHè„šæœ¬
    " Bundle 'bash-support.vim'
    " -------------------------------------------------
    " ç»“æ„åŒ–æ•°æ®å˜æˆæ¼‚äº®çš„è¡¨
    " Bundle 'Stormherz/tablify'
    " -------------------------------------------------
    " -------------------------------------------------
    " æ£€æµ‹å½“å…‰æ ‡æ”¹å˜æ—¶ï¼Œæ‰§è¡Œå‡½æ•°
    " Bundle 'hookcursormoved'
    " -------------------------------------------------
    " ç±»ä¼¼emacsçš„king ring,ç»™vimçš„yankä¹Ÿå¢åŠ ç¼“å†²,vimæœ¬èº«åªç¼“å†²åˆ é™¤çš„å­—ç¬¦ä¸²,ä¸ç¼“å†²yankçš„å†…å®¹,è¿™ä¸ªæ’ä»¶å¯ä»¥åŒæ—¶ç²˜è´´å¤šä¸ªéœ€è¦çš„å•è¯ç­‰
    " Bundle 'YankRing.vim'
    " -------------------------------------------------
    " c/c++ support,è®©ä½ ç”¨ç¼–å†™c/c++ç¨‹åºæ—¶å¦‚è™æ·»ç¿¼,æœ‰å¾ˆå¤šè´´å¿ƒçš„åŠŸèƒ½,æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰å¿«æ·é”®,ä¸è¿‡ä¸€éƒ¨åˆ†å’ŒNERD_commentså†²çª å¦‚æœç»å¸¸ç¼–å†™ä¸€äº›å•æ–‡ä»¶çš„cç¨‹åº,ä½†æ˜¯ä¸æƒ³å†™makefile,ç”¨è¿™ä¸ª,ä»–å¸®ä½ å®Œæˆ,F9ç¼–è¯‘å¹¶é“¾æ¥,ctrl-F9è¿è¡Œ
    Bundle 'c.vim'
    " let g:C_Ctrl_j = 'off'
    " -------------------------------------------------
    " Uniteå¯ä»¥åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¿«é€Ÿæµè§ˆæ–‡ä»¶ã€‚ä½†æ˜¯å®ƒä¸ä»…é™äºæ–‡ä»¶ï¼Œå…¶ä»–ä»»ä½•å¯ä»¥åˆ—å‡ºçš„ä¸œè¥¿éƒ½å¯ä»¥å¾ˆå¥½çš„è¢«æ˜¾ç¤ºå’Œæœç´¢ã€‚
    Bundle 'Shougo/unite-help'
    Bundle 'Shougo/unite-outline'
    Bundle 'Shougo/unite.vim'
    " Bundle 'osyo-manga/unite-quickfix'
    " Bundle 'tsukkee/unite-tag'
    " -------------------------------------------------
    " Bundle 'will133/vim-dirdiff'
    " let g:DirDiffExcludes = "CVS,*.class,*.exe,.*.swp, .*.cmd, *.o, .git"
    " -------------------------------------------------
    " FavEx : Favorite file and directory explorer ,å¯ä»¥æ·»åŠ ç›®å½•å’Œæ–‡ä»¶åˆ°æ”¶è—å¤¹ï¼Œå¯ä»¥æŠŠç»å¸¸ç¼–è¾‘çš„æ–‡ä»¶æ·»åŠ åˆ°æ”¶è—å¤¹æ¥ï¼Œåœ¨æ–‡ä»¶æ‰“å¼€ä»¥åï¼Œ\ffæ–°å¢æ–‡ä»¶åˆ°æ”¶è—å¤¹ï¼Œ\fdæ–°å¢ç›®å½•åˆ°æ”¶è—å¤¹
    " Bundle 'FavEx'
    " -------------------------------------------------
    " æ–‡æœ¬åŒçº§æ–‡å­—é€‰å–ï¼Œå’Œæ–‡æœ¬å¤„ç† æ¨èï¼š****
    " Bundle 'kana/vim-textobj-indent'
    " Bundle 'kana/vim-textobj-user'
    " -------------------------------------------------
    " å¯ä»¥å¯¹é€‰ä¸­çš„æ–‡æœ¬å—æ‰§è¡Œexæ“ä½œ,å°¤å…¶æ˜¯visual blockæ¨¡å¼ä¸‹,vimè‡ªå·±æ˜¯ä¸æ”¯æŒçš„.é€‰ä¸­å,:B åŠ ä¸Šexå‘½ä»¤
    " Bundle 'navicore/vis.vim'
    " -------------------------------------------------
    " æŠ˜å 
    Bundle 'lambdalisue/vim-foldround'
    nmap <Leader>xf <Plug>(foldround-forward)
    nmap <Leader>fb <Plug>(foldround-backward)

    Bundle 'Konfekt/FastFold'
    nmap zuz <Plug>(FastFoldUpdate)
    let g:fastfold_savehook = 1
    let g:fastfold_fold_command_suffixes =  ['x','X','a','A','o','O','c','C']
    let g:fastfold_fold_movement_commands = [']z', '[z', 'zj', 'zk']

    Bundle 'tmhedberg/SimpylFold'

    Bundle 'tweekmonster/braceless.vim'

    setlocal foldlevel=1               " è®¾ç½®æŠ˜å å±‚æ•°ä¸º
    set nofoldenable                   " å¯åŠ¨ vim æ—¶å…³é—­æŠ˜å ä»£ç 
    set foldcolumn=1                   " è®¾ç½®æŠ˜å åŒºåŸŸçš„å®½åº¦
    " -------------------------------------------------
    " è¯­æ³•é«˜äº® ä¼¼ä¹ä¸å¥½ç”¨
    " Bundle 'plasticboy/vim-markdown'
    " let g:vim_markdown_frontmatter=1
    " -------------------------------------------------
    " Bundle 'vimwiki/vimwiki'
    " -------------------------------------------------
    " -------------------------------------------------
    " ç»™vimå¢åŠ urlçš„è¯†åˆ«åŠŸèƒ½,ä½†æ˜¯åŠŸèƒ½è¿œä¸åªæ˜¯æ”¯æŒurl,è¿˜æœ‰æ›´å¤š,è¯¦æƒ…è§utlçš„å¸®.
    " utl.vim
    " -------------------------------------------------
    " arrayæ“ä½œåº“å‡½æ•°ï¼Œmultiselectä¾èµ–å®ƒ
    " Bundle 'multvals.vim'
    " -------------------------------------------------
    " å¯ä»¥å¯¹æ•°å­—, æ—¥æœŸ, æ˜ŸæœŸ, å­—æ¯è¿›è¡Œåºåˆ—å¡«å……, æ–¹å¼æœ‰å‡åºå’Œé™åº, åŒæ—¶å¯ä»¥æŒ‡å®šstepé—´éš”.
    " ç»™vimå¢åŠ ç”Ÿæˆé€’å¢æˆ–è€…é€’å‡æ•°åˆ—çš„åŠŸèƒ½,æ”¯æŒåè¿›åˆ¶,åå…­è¿›åˆ¶,æ—¥æœŸ,æ˜ŸæœŸç­‰,åŠŸèƒ½å¼ºå¤§çµæ´»
    " Bundle 'VisIncr'
    " -------------------------------------------------
    " -------------------------------------------------
    " runs make and shows the test run status with a red or green bar.
    " Bundle 'reinh/vim-makegreen'
    " -------------------------------------------------
    " C++ç›¸å…³
    " Bundle 'stl.vim' "stlè¯­æ³•é«˜äº®+
    " Bundle 'stlrefvim' "stlå¸®åŠ© +
    " -------------------------------------------------
    " Bundle 'Wildog/airline-weather.vim'
    " let g:weather#area = 'newyorkcity,us'
    " let g:weather#unit = 'metric'
    " -------------------------------------------------
    "FuzzyFinderåº•å±‚ä¾è€+
    " Bundle 'l9'
    " Bundle 'junegunn/fzf'
    " FuzzyFinderç¼“å†²å™¨/æ–‡ä»¶/å‘½ä»¤/æ ‡ç­¾/ç­‰æµè§ˆå™¨çš„æ¨¡ç³ŠåŒ¹é… +
    " electbuf.vimç›¸æ¯”ï¼Œå®ƒå°‘äº†å¯¹å¤šä¸ªbufçš„æ‰¹é‡é€‰æ‹©å’Œå¤„ç†
    " mru.vim -> fuzzyfinder.vim:FuzzyFinderMruFile
    " favex.vim -> fuzzyfinder.vim:FuzzyFinderFavFile
    " selectbuf.vim -> fuzzyfinder.vim:FuzzyFinderBuffer
    " NERDTree.vim -> fuzzyfinder.vim:FuzzyFinderFile
    " -------------------------------------------------
    " åˆ—å‡ºå½“å‰æ‰“å¼€çš„buffer,å¯ä»¥å¾ˆå®¹æ˜“çš„åˆ‡æ¢åˆ°å’Œåˆ é™¤é€‰å®šçš„buffer,å¿…å¤‡æ’ä»¶ä¹‹ä¸€
    " \be å…¨å±æ–¹å¼æŸ¥çœ‹å…¨éƒ¨æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨
    " \bv å·¦å³æ–¹å¼æŸ¥çœ‹   \bs ä¸Šä¸‹æ–¹å¼æŸ¥çœ‹
    Bundle 'jlanzarotta/bufexplorer'
    let g:bufExplorerDefaultHelp=0
    let g:bufExplorerShowRelativePath=1
    let g:bufExplorerSortBy = "name"
    map <leader>o :BufExplorer<cr>

    Bundle 'fholgado/minibufexpl.vim'
    " åˆ‡æ¢ç¼“å†²åŒº
    let g:miniBufExplorerAutoStart = 0
    " let g:miniBufExplBRSplit = 0
    let g:miniBufExplVSplit = 20
    " let g:miniBufExplSplitBelow=1

    " minibufexplæ’ä»¶çš„ä¸€èˆ¬è®¾ç½®
    " let g:miniBufExplMapWindowNavVim = 1
    " let g:miniBufExplMapWindowNavArrows = 1
    " let g:miniBufExplMapCTabSwitchBufs = 1
    " let g:miniBufExplModSelTarget = 1
    " let g:miniBufExplorerMoreThanOne = 1 "è‡ªåŠ¨æ‰“å¼€
    " autocmd BufRead,BufNew :call UMiniBufExplorer
    " let g:miniBufExplUseSingleClick = 1

    " æ˜¾ç¤º/éšè— MiniBufExplorer çª—å£
    " map <Leader>bl :MBEToggle<cr>
    " buffer åˆ‡æ¢å¿«æ·é”®
    " map <C-Tab> :MBEbn<cr>
    " map <C-S-Tab> :MBEbp<cr>
    " -------------------------------------------------
    " å¼‚æ­¥è¯­æ³•æ£€æŸ¥
    " Bundle 'w0rp/ale'
    " -------------------------------------------------
    " Very small, clean but quick and powerful buffer manager. c.
    " qbuf
    " -------------------------------------------------
    " Bundle 'jsfaint/gen_tags.vim'
    " Bundle 'gtags.vim'
    " Bundle 'matchparen/'
    " Bundle 'xml.vim'
    " Bundle 'tpope/vim-git'
    " Bundle 'winfileexplorer.vim'
    " Bundle 'wintagexplorer.vim'
    " Bundle 'chrisbra/csv.vim'
    " Bundle 'CaptureClipboard'
    " Bundle 'ctrlp-modified.vim'
    " -------------------------------------------------
" }}}

" spf13. {{{
    "===============================================================================+
    source ~/.vim/bundle/spf13-vim/.vimrc
    "===============================================================================+
    " config spf13's plugin should after source spf13-vim/.vimrc.

    " vim-multiple-cursorsè®¾ç½® {{{
        if 1 && isdirectory(expand("~/.vim/bundle/vim-multiple-cursors"))
            let g:multi_cursor_next_key='<C-n>'
            let g:multi_cursor_prev_key='<C-p>'
            let g:multi_cursor_skip_key='<C-x>'
            let g:multi_cursor_quit_key='<Esc>'
        endif
    " }}}

    " EasyMotionè®¾ç½® {{{
        if 1 && isdirectory(expand("~/.vim/bundle/vim-easymotion"))
            " nmap t <Plug>(easymotion-t2)
            map  ? <Plug>(easymotion-sn)
            omap ? <Plug>(easymotion-tn)
            " map  n <Plug>(easymotion-next)
            " map  N <Plug>(easymotion-prev)
            map <Leader>l <Plug>(easymotion-lineforward)
            map <Leader>j <Plug>(easymotion-j)
            map <Leader>k <Plug>(easymotion-k)
            map <Leader>h <Plug>(easymotion-linebackward)
            let g:EasyMotion_startofline = 0 " keep cursor column when JK motion

            let g:EasyMotion_do_mapping = 0 " Disable default mappings
            " Bi-directional find motion
            " Jump to anywhere you want with minimal keystrokes, with just one key
            " binding.
            " `s{char}{label}`
            nmap s <Plug>(easymotion-s)
            " or
            " `s{char}{char}{label}`
            " Need one more keystroke, but on average, it may be more comfortable.
            nmap s <Plug>(easymotion-s2)
            " Turn on case insensitive feature
            let g:EasyMotion_smartcase = 1
        endif
    " }}}

    " YouCompleteMe {{{
        if 1 && isdirectory(expand("~/.vim/bundle/YouCompleteMe"))
            "**
            " é¦–æ¬¡ä½¿ç”¨æ­¥éª¤:
            " 1. è·å– YCM çš„ä¾èµ–åŒ…
            "    cd ~/.vim/bundle/YouCompleteMe/
            "    git submodule update --init --recursive
            "    follow the README.md ä¿è¯å®‰è£…å¥½cmake
            " 2. ./install.py --clang-completer
            " 3. done
            " å¦‚æœå¤±è´¥å°±ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•
            " 2. åœ¨ http://llvm.org/releases/download.html æ‰¾åˆ°æœ€æ–°ç‰ˆ LLVMï¼Œåœ¨Pre-built Binaries
            "    ä¸‹é€‰æ‹©é€‚åˆä½ å‘è¡Œå¥—ä»¶çš„æœ€æ–°ç‰ˆé¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸‹è½½å¹¶è§£å‹è‡³ ~/xxx/clang+llvm,è¿™é‡Œæœ€å¥½å°†binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œä»¥åæœ‰ç”¨ã€‚
            " 3. mkdir and cd ~/ycm_build
            "    cmake -G "Unix Makefiles" -DPATH_TO_LLVM_ROOT=~/xxx/clang+llvm/ . ~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp
            "    make ycm_support_libs
            "    cmake -G "Unix Makefiles" . ~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp
            " 4. done
            " ------------------>>> may be need install python-dev
            "*/

            nnoremap <F1> :YcmForceCompileAndDiagnostics<CR>
            let g:ycm_global_ycm_extra_conf = '~/.vim/bundle/YouCompleteMe/third_party/ycmd/examples/.ycm_extra_conf.py'
            let g:syntastic_always_populate_loc_list = 1
            let g:ycm_always_populate_location_list =1

            " èœå•
            highlight Pmenu ctermfg=3 ctermbg=black guifg=#005f87 guibg=#EEE8D5
            " é€‰ä¸­é¡¹
            highlight PmenuSel ctermfg=green ctermbg=black guifg=#AFD700 guibg=#106900
            " è¡¥å…¨åŠŸèƒ½åœ¨æ³¨é‡Šä¸­åŒæ ·æœ‰æ•ˆ
            let g:ycm_complete_in_comments=1
            " å…è®¸ vim åŠ è½½ .ycm_extra_conf.py æ–‡ä»¶ï¼Œä¸å†æç¤º
            let g:ycm_confirm_extra_conf=0
            " å¼€å¯ YCM æ ‡ç­¾è¡¥å…¨å¼•æ“
            let g:ycm_collect_identifiers_from_tags_files=1
            " å¼•å…¥ C++ æ ‡å‡†åº“tags
            "set tags+=/data/misc/software/misc./vim/stdcpp.tags
            " YCM é›†æˆ OmniCppComplete è¡¥å…¨å¼•æ“ï¼Œè®¾ç½®å…¶å¿«æ·é”®
            "inoremap <leader>; <C-x><C-o>
            " è¡¥å…¨å†…å®¹ä¸ä»¥åˆ†å‰²å­çª—å£å½¢å¼å‡ºç°ï¼Œåªæ˜¾ç¤ºè¡¥å…¨åˆ—è¡¨
            set completeopt-=preview
            " ä»ç¬¬ä¸€ä¸ªé”®å…¥å­—ç¬¦å°±å¼€å§‹ç½—åˆ—åŒ¹é…é¡¹
            let g:ycm_min_num_of_chars_for_completion=2
            " ç¦æ­¢ç¼“å­˜åŒ¹é…é¡¹ï¼Œæ¯æ¬¡éƒ½é‡æ–°ç”ŸæˆåŒ¹é…é¡¹
            let g:ycm_cache_omnifunc=0
            " è¯­æ³•å…³é”®å­—è¡¥å…¨
            let g:ycm_seed_identifiers_with_syntax=0
            " æ”¶é›†æ‰€æœ‰è¯æ¡
            let g:ycm_collect_identifiers_from_comments_and_strings = 1
            " å…³é—­è¯­æ³•æ£€æŸ¥
            let g:ycm_register_as_syntastic_checker = 0

            let g:ycm_auto_trigger = 1
            " let g:ycm_semantic_triggers = {}
            " let g:ycm_semantic_triggers.c = ['->', '.', ' ', '(', '[', '&']

            " let g:ycm_register_as_syntastic_checker = 0
            let g:syntastic_enable_highlighting = 0

            " nnoremap <leader>gl :YcmCompleter GoToDeclaration<CR>
            nnoremap <leader>gf :YcmCompleter GoToDefinition<CR>
            nnoremap <leader>gl :YcmCompleter GoToDefinitionElseDeclaration<CR>
            " nmap <F3> :YcmDiags<CR>

            " let g:UltiSnipsSnippetDirectories=[$HOME.'/.vim/bundle/wim/UltiSnips']

            let g:ycm_filetype_blacklist = {
                        \ 'tagbar' : 1,
                        \ 'qf' : 1,
                        \ 'notes' : 1,
                        \ 'markdown' : 1,
                        \ 'unite' : 1,
                        \ 'text' : 1,
                        \ 'vimwiki' : 1,
                        \ 'gitcommit' : 1,
                        \}

            " å½±å“å›è½¦
            let g:UltiSnipsExpandTrigger="<TAB>"
            let g:UltiSnipsJumpForwardTrigger="<c-j>"
            let g:UltiSnipsJumpBackwardTrigger="<c-k>"
            au InsertEnter * exec "inoremap <silent> " . g:UltiSnipsExpandTrigger . " <C-R>=g:UltiSnips_Complete()<cr>"
            au InsertEnter * exec "inoremap <silent> " . g:UltiSnipsJumpBackwardTrigger . " <C-R>=g:UltiSnips_Reverse()<cr>"
        endif
    " }}}

    " tagbar {{{
        if 1 && isdirectory(expand("~/.vim/bundle/tagbar"))
            " let tagbar_ctags_bin=ctags
            " è®¾ç½® tagbar å­çª—å£çš„ä½ç½®å‡ºç°åœ¨ä¸»ç¼–è¾‘åŒºçš„å·¦è¾¹
            let tagbar_left=1
            " è®¾ç½®æ˜¾ç¤ºï¼éšè—æ ‡ç­¾åˆ—è¡¨å­çª—å£çš„å¿«æ·é”®ã€‚
            " nnoremap <Leader>tl :TagbarToggle<CR>
            nmap tb :Tagbar<cr>
            " è®¾ç½®æ ‡ç­¾å­çª—å£çš„å®½åº¦
            let tagbar_width=32
            " tagbar å­çª—å£ä¸­ä¸æ˜¾ç¤ºå†—ä½™å¸®åŠ©ä¿¡æ¯
            let g:tagbar_compact=1
            " è®¾ç½® ctags å¯¹å“ªäº›ä»£ç å…ƒç´ ç”Ÿæˆæ ‡ç­¾
            let g:tagbar_type_cpp = {
                        \ 'kinds' : [
                        \ 'd:macros:1',
                        \ 'g:enums',
                        \ 't:typedefs:0:0',
                        \ 'e:enumerators:0:0',
                        \ 'n:namespaces',
                        \ 'c:classes',
                        \ 's:structs',
                        \ 'u:unions',
                        \ 'f:functions',
                        \ 'm:members:0:0',
                        \ 'v:global:0:0',
                        \ 'x:external:0:0',
                        \ 'l:local:0:0'
                        \ ],
                        \ 'sro'      : '::',
                        \ 'kind2scope' : {
                        \ 'g' : 'enum',
                        \ 'n' : 'namespace',
                        \ 'c' : 'class',
                        \ 's' : 'struct',
                        \ 'u' : 'union'
                        \ },
                        \ 'scope2kind' : {
                        \ 'enum'     : 'g',
                        \ 'namespace' : 'n',
                        \ 'class'   : 'c',
                        \ 'struct' : 's',
                        \ 'union'   : 'u'
                        \ }
                        \ }
        endif
    " }}}

    " vim-airline {{{
        if 1 && isdirectory(expand("~/.vim/bundle/vim-airline"))
            let g:airline_theme="dark"
            let g:airline_powerline_fonts = 1
            let g:airline#extensions#tabline#buffer_nr_show = 1
            let g:airline#extensions#tabline#enabled = 1
            let g:airline#extensions#tabline#left_sep = ' '
            let g:airline#extensions#tabline#left_alt_sep = '|'
            if !exists('g:airline_symbols')
                let g:airline_symbols = {}
            endif
            let g:airline_symbols.space = "\ua0"
        endif
    " }}}

    " Ctrlp å’Œ Ctrlp-funky(,fu) {{{
        if isdirectory(expand("~/.vim/bundle/ctrlp.vim/"))
            let g:ctrlp_working_path_mode = 'ra'
            let g:ctrlp_custom_ignore = {
                        \ 'dir':  '\.git$\|\.hg$\|\.svn$',
                        \ 'file': '\.exe$\|\.so$\|\.dll$\|\.pyc$' }

            if executable('ag')
                let s:ctrlp_fallback = 'ag %s --nocolor -l -g ""'
            elseif executable('ack-grep')
                let s:ctrlp_fallback = 'ack-grep %s --nocolor -f'
            elseif executable('ack')
                let s:ctrlp_fallback = 'ack %s --nocolor -f'
                " On Windows use "dir" as fallback command.
            else
                let s:ctrlp_fallback = 'find %s -type f'
            endif
            if exists("g:ctrlp_user_command")
                unlet g:ctrlp_user_command
            endif
            let g:ctrlp_user_command = {
                        \ 'types': {
                        \ 1: ['.git', 'cd %s && git ls-files . --cached --exclude-standard --others'],
                        \ 2: ['.hg', 'hg --cwd %s locate -I .'],
                        \ },
                        \ 'fallback': s:ctrlp_fallback
                        \ }

            if isdirectory(expand("~/.vim/bundle/ctrlp-funky/"))
                " CtrlP extensions
                let g:ctrlp_extensions = ['funky']
                nnoremap <Leader>fu :CtrlPFunky<Cr>
                nnoremap <Leader>fU :execute 'CtrlPFunky ' . expand('<cword>')<Cr>
            endif
        endif
    " }}}

    " vim-powerline {{{
        if isdirectory(expand("~/.vim/bundle/vim-powerline/"))
            " mkfontscale
            " mkfontdir
            " fc-cache -vf
            " rm ~/.vim/bundle/vim-powerline/*.cache
            " https://github.com/eugeii/consolas-powerline-vim.git
            " https://github.com/powerline/fonts.git
            " set guifont=PowerlineSymbols\ for\ Powerline
            " let g:Powerline_symbols = 'fancy'
        endif
    " }}}
    "===============================================================================+
" }}}

" add my main set here. {{{

    " Environment {{{
        filetype off                       " å…³é—­æ–‡ä»¶ç±»å‹ä¾¦æµ‹
        " syntax enable                      " å¼€å¯è¯­æ³•é«˜äº®åŠŸèƒ½
        set nofen
        set nomodeline                     " ä¸æ£€æŸ¥æ¨¡å¼è¡Œ
        set timeoutlen=500                 " æ¯«ç§’è®¡çš„ç­‰å¾…é”®ç æˆ–è€…æ˜ å°„çš„é”®åºåˆ—å®Œæˆçš„æ—¶é—´
        set selection=exclusive            " å¯¹é€‰æ‹©åŒºæ“ä½œä¸åŒ…å«å…‰æ ‡æ‰€åœ¨å­—ç¬¦
        set lazyredraw                     " æ‰§è¡Œå®æ—¶ä¸é‡ç”»
        set ttyfast                        " è¡¨æ˜ä½¿ç”¨çš„æ˜¯å¿«é€Ÿç»ˆç«¯è¿æ¥
        set linebreak                      " é˜²æ­¢æŠ˜è¡Œæ—¶æ‰“æ–­å•è¯ï¼Œå°†æ•´ä¸ªè¯è¿›è¡ŒæŠ˜è¡Œã€‚
        set display=lastline               " é•¿è¡Œæ˜¾ç¤ºï¼Œè§£å†³@@@@çš„é—®é¢˜
        set numberwidth=4                  " è¡Œå·æ çš„å®½åº¦
        set fillchars=vert:\ ,stl:\        " åœ¨è¢«åˆ†å‰²çš„çª—å£é—´æ˜¾ç¤ºç©ºç™½ï¼Œä¾¿äºé˜…è¯»,stlnc:\(åŠ äº†è¿™ä¸ªwmåˆ†å‰²å…°æœ‰\\\\\\\\\\\\\)
        set cmdheight=1                    " å‘½ä»¤è¡Œï¼ˆåœ¨çŠ¶æ€è¡Œä¸‹ï¼‰çš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1
        " set noeb                           " å»æ‰è¾“å…¥é”™è¯¯çš„æç¤ºå£°éŸ³
        " set noerrorbells                   " å…³é—­é”™è¯¯ä¿¡æ¯å“é“ƒ
        " set novisualbell                   " å…³é—­ä½¿ç”¨å¯è§†å“é“ƒä»£æ›¿å‘¼å«
        " set undofile                     " æ— é™undo
        " set t_vb=                          " ç½®ç©ºé”™è¯¯é“ƒå£°çš„ç»ˆç«¯ä»£ç 
        set showtabline=1                  " æŒ‡å®šä½•æ—¶æ˜¾ç¤ºå¸¦æœ‰æ ‡ç­¾é¡µæ ‡ç­¾çš„è¡Œ,è¿™é‡Œè®¾ç½®ä¸ºè‡³å°‘æœ‰ä¸¤ä¸ªä»¥ä¸Šæ‰æ˜¾ç¤º.
        set confirm                        " é€€å‡ºã€å†™å…¥ç­‰æœ‰æœªä¿å­˜çš„æ”¹åŠ¨æˆ–æ–‡ä»¶åªè¯»æ—¶è¯¢é—®
        set noswapfile                     " å…³é—­äº¤æ¢æ–‡ä»¶
        set nobackup                       " è¦†ç›–æ–‡ä»¶æ—¶ä¸å¤‡ä»½
        set backupcopy=yes                 " è®¾ç½®å¤‡ä»½æ—¶çš„è¡Œä¸ºä¸ºè¦†ç›–
        set nowritebackup                  " ä¸å†™å…¥å¤‡ä»½æ–‡ä»¶
        set t_BE=
        set shell=/bin/bash
        set mousehide                      " è¾“å…¥æ–‡ä»¶æ—¶éšè—é¼ æ ‡
        set nospell
        set matchtime=0			   " åŒ¹é…æ‹¬å·é«˜äº®çš„æ—¶é—´ï¼ˆå•ä½æ˜¯ååˆ†ä¹‹ä¸€ç§’ï¼‰
        set selectmode=mouse,key
        set bufhidden=hide
        " set bufhidden=delete
        set wildignore+=*.bak,*.o,*.e,*~,*.obj,.git,*.pyc
        set autoread                       " è®¾ç½®å½“æ–‡ä»¶è¢«æ”¹åŠ¨æ—¶è‡ªåŠ¨è½½å…¥
        set completeopt=preview,longest,menuone "ä»£ç è¡¥å…¨
        " set rtp+=xxx/vim		   " è‡ªå®šä¹‰vimç›®å½•ä½ç½®

        " :help digraph-table ç‰¹æ®Šå­—ç¬¦è¡¨

        " tabçš„è®¾å®š
        set smarttab                       " åœ¨è¡Œå’Œæ®µå¼€å§‹å¤„ä½¿ç”¨åˆ¶è¡¨ç¬¦
        set tabstop=8                      " è®¾ç½®ç¼–è¾‘æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
        " set shiftwidth=8                 " è®¾ç½®æ ¼å¼åŒ–æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
        " set softtabstop=8                " è®© vim æŠŠè¿ç»­æ•°é‡çš„ç©ºæ ¼è§†ä¸ºä¸€ä¸ªåˆ¶è¡¨ç¬¦, ä½¿å¾—æŒ‰é€€æ ¼é”®æ—¶å¯ä»¥ä¸€æ¬¡åˆ æ‰ 4 ä¸ªç©ºæ ¼
        " set expandtab                    " ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦
        " set noexpandtab                    " ä¸è¦ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦
        " autocmd FileType sh setlocal shiftwidth=4

        " æ”¯æŒä»£ç æŠ˜å 
        set foldlevel=1               " è®¾ç½®æŠ˜å å±‚æ•°ä¸º
        " set foldenable                   " å…è®¸æŠ˜å 
        " set foldclose=all                " è®¾ç½®ä¸ºè‡ªåŠ¨å…³é—­æŠ˜å 
        " set foldmethod=syntax            " ç”¨è¯­æ³•é«˜äº®æ¥å®šä¹‰æŠ˜å 
        " set foldmethod=manual            " æ‰‹åŠ¨æŠ˜å 
        set foldmethod=marker              " ä¾æ ‡å¿—æŠ˜å 
        " set foldmethod=indent            " åŸºäºç¼©è¿›æˆ–è¯­æ³•è¿›è¡Œä»£ç æŠ˜å 
        set foldcolumn=0                   " è®¾ç½®æŠ˜å åŒºåŸŸçš„å®½åº¦
        " ä»£ç æŠ˜å å¼€å…³
        " nmap <F1> @=((foldclosed(line('.')) < 0) ? 'zc' : 'zo')<CR>

        " leader
        let mapleader        = ";"
        let maplocalleader   = ";"
        let g:mapleader      = ";"
        let g:maplocalleader = ";"
        " let g:spf13_leader=';'
        " let g:spf13_localleader=';'

        set encoding=utf-8
        if has("multi_byte")
            set fileencoding=utf-8
            " set fileencoding=gb18030
            " set fileencoding=gb2312
            let &termencoding=&encoding
            set fileencodings=utf-8,iso-8859-1,gbk,latin1,ucs-bom,cp936,gb18030,utf-16,big5,gb2312,chinese
            if v:lang=~? '^\(zh\)\|\(ja\)\|\(ko\)'
                set ambiwidth=double
            endif
        endif
	" set termencoding=utf-8
    " }}}

    " statusline {{{
        highlight StatusLine cterm=bold ctermfg=gray ctermbg=black
        highlight LineNr ctermfg=gray ctermbg=black                       " ä¾§è¾¹é¢œè‰²
        highlight User1 ctermfg=gray
        highlight User2 ctermfg=green
        highlight User3 ctermfg=red
        highlight User4 ctermfg=yellow
        highlight User5 ctermfg=black
        highlight User6 ctermfg=blue
        highlight User7 ctermbg=black
        set statusline=%7*\ %3*%{HasPaste()}%*[file:\ %2*%t%r%h%w%*]%3*%m%*[dir:\ %<%2*%{CurDir()}%*]%=\ \ \ \ \ \ \ \ \ \ %4*[%{&ff}][%{&encoding}]%6*%y%*[Line:%2*%l%*/%2*%L%*,Column:%2*%c%*][%2*%p%%%*]

        au InsertEnter * call InsertStatuslineColor('i')
        au InsertLeave * call InsertStatuslineColor('')
    " statusline end }}}

    " my map {{{
        "Space to command mode.
        nnoremap <space> :
        vnoremap <space> :

        " GIT
        nnoremap <leader>gd :GitGutterPreviewHunk<cr>
        nnoremap <leader>ga :GitGutterStageHunk<cr>

        " ç©ºæ ¼é”®æ›¿æ¢ä¸ºæ¢è¡Œ
        " nnoremap <S-k> :s/ \+/\r/g<cr>:noh<cr>
        vnoremap <S-k> :s/ \+/\r/g<cr>:noh<cr>

        "ä½¿ç”¨<leader>ç©ºæ ¼æ¥å–æ¶ˆæœç´¢é«˜äº®
        nnoremap <silent> <leader><space> :noh<cr>

        "å»ç©ºè¡Œ
        nnoremap <leader>db :g/^\s*$/d<cr>

        "æ¸…é™¤æœ«å°¾ç©ºæ ¼
        nnoremap <leader>ds :%s/\s\+$//<cr>

        "å‡½æ•°å†…æ’ç‰ˆ
        nmap = =a{

        "æ¸…é™¤é€‰ä¸­è¡Œä¸­æ‰€æœ‰ç©ºæ ¼
        nnoremap <leader>dd :s/[ \t]\{1,}//g<cr>:noh<cr>
        vnoremap <leader>dd :s/[ \t]\{1,}//g<cr>:noh<cr>

        "æ¸…é™¤é€‰ä¸­è¡Œä¸­ç©ºæ ¼,ä¿ç•™ä¸€ä¸ª
        nnoremap <leader>d1 :s/[ \t]\{1,}/ /g<cr>:noh<cr>
        vnoremap <leader>d1 :s/[ \t]\{1,}/ /g<cr>:noh<cr>

        " æ¸…é™¤åé¢ç©ºæ ¼
        nmap fk :1,$s/ *$//g<cr>
        " nmap fk :1,$s/^.*\.//g<cr>
        " nmap  <F4> :%s/ *$//g<cr>

        " åˆ‡æ¢ç›®å½•
        noremap <leader>1 :execute "cd" expand("%:h")<CR>:execute 'pwd'<cr>
        noremap <leader>2 :call GO_GIT_DIR()<cr>

        "åˆ é™¤è¡Œå°¾çš„ä¸€ä¸ª^M
        nmap dm :%s/\r\+$//e<cr>:set ff=unix<cr>
        " noremap <Leader>m2 mmHmt:%s/<C-V><cr>//ge<cr>'tzt'm
        " noremap <Leader>ff :%s/\\\$//g<cr>:%s/\\\/ /g<cr>

        "escçš„æ˜ å°„
        imap jj <esc>
        imap qq <esc>

        " å¥½ç”¨çš„å¤åˆ¶ã€ç²˜è´´
        vmap <C-c> "+y
        imap <C-v> <Esc>"*pa
        vnoremap <silent> y y`]
        vnoremap <silent> p p`]
        nnoremap <silent> p p`]

        " ä½¿ç”¨tabé”®æ¥ä»£æ›¿%è¿›è¡ŒåŒ¹é…è·³è½¬
        nnoremap <tab> %
        vnoremap <tab> %

        nnoremap <CR> %
        " å¤„ç†æŠ˜å è¡Œçš„å·¦å³ç§»åŠ¨
        noremap j gj
        noremap k gk



        " Switching between buffers.
        nnoremap <C-h> <C-W>h
        nnoremap <C-j> <C-W>j
        nnoremap <C-k> <C-W>k
        nnoremap <C-l> <C-W>l
        nnoremap <C-x> <c-w>\|<c-w>_
        "inoremap <C-h> <Esc><C-W>h
        "inoremap <C-j> <Esc><C-W>j
        "inoremap <C-k> <Esc><C-W>k
        "inoremap <C-l> <Esc><C-W>l

        " bufferç¼©æ”¾
        nmap -- 5<C-w>-
        nmap ++ 5<C-w>+
        nmap >> 5<C-w>>
        nmap << 5<C-w><

        " ä¸ºé€‰ä¸­ä»£ç åŠ æ‹¬å·å•¥çš„
        vnoremap 1 h<esc>`>a)<esc>`<i(<esc>
        " vnoremap 2 h<esc>`>a]<esc>`<i[<esc> 'bug for vv'
        vnoremap 3 h<esc>`>a}<esc>`<i{<esc>
        vnoremap 4 h<esc>`>a"<esc>`<i"<esc>
        vnoremap 5 h<esc>`>a'<esc>`<i'<esc>

        " å¸¸ç”¨ç¼©å†™
        iab xdate <c-r>=strftime("%d/%m/%y %H:%M:%S")<cr>

        " å¯¹é€‰ä¸­ä»£ç è¿›è¡ŒåŒ¹é…
        vnoremap <silent> * :call VisualSearch('f')<CR>
        vnoremap <silent> # :call VisualSearch('b')<CR>
        " When you press gv you vimgrep after the selected text
        " vnoremap <silent> gv :call VisualSearch('gv')<CR>

        "å…‰æ ‡æ‰€åœ¨è¯æœç´¢
        nnoremap <leader>f *
        nnoremap <leader>fa :call SET_ISK()<cr>

        " çª—å£è‡ªåŠ¨åŠè¾¹æ’ç‰ˆ
        nnoremap <silent> <leader>; :call VZOOM()<cr>

        "æ’å…¥æ¨¡å¼ä¸‹ç§»åŠ¨
        inoremap <c-h> <C-o><S-Left>
        inoremap <c-j> <C-o><left>
        inoremap <c-k> <C-o><right>
        inoremap <c-l> <C-o><c-right>
        inoremap <C-a> <C-o><HOME>
        inoremap <C-e> <C-o><END>
        inoremap <C-b> <S-Left>
        " inoremap <C-h> <left>
        " inoremap <C-j> <down>
        " inoremap <C-k> <up>
        " inoremap <C-l> <right>

        "è®¾ç½®tabå®½åº¦
        map <leader>t2 :setlocal shiftwidth=2<cr>
        map <leader>t4 :setlocal shiftwidth=4<cr>
        map <leader>t8 :setlocal shiftwidth=8<cr>

        " Bash like keys for the command line
        cnoremap <C-A> <Home>
        cnoremap <C-E> <End>
        cnoremap <C-K> <C-U>
        cnoremap <C-P> <Up>
        cnoremap <C-N> <Down>

        " æ¯”è¾ƒæ–‡ä»¶
        nnoremap <leader>df :vert diffsplit 
        nnoremap <leader>dff :diffoff<cr>

        "Esc é”®ä¸è®©å…‰æ ‡å·¦ç§»
        " imap <Esc> <C-o>:stopinsert<CR>

        " i/a æŠ€å·§: di da vi va ya yi...
        " å¿«é€Ÿé€‰æ‹©æ®µä¸­ä¸²
        map <leader>u vi"

        " Markdown
        map <leader>md :MarkdownPreview<cr>

        "Tabel
        nnoremap <S-q> :tabprevious<CR>
        nnoremap <S-w> :tabnext<CR>
        nnoremap te :tabedit 
        nnoremap tm :tabmove 
        nnoremap 1 1gt
        nnoremap 2 2gt
        nnoremap 3 3gt

        " ç‹¬ç«‹çš„å‰ªè´´æ¿
        " vmap <silent> <expr> p <sid>Repl()

        " set colorcolumn=100
        " set cursorcolumn                   "é«˜äº®æ˜¾ç¤ºå½“å‰åˆ—
        " set colorcolumn=37                 " å½©è‰²æ˜¾ç¤ºä¸€åˆ—ï¼Œç”¨ä»¥è§„èŒƒä»£ç 
        " set nocul
        " set nocuc
        " autocmd InsertLeave * set nocul    " ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ
        " autocmd InsertEnter * set cul      " ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ
        " highlight cursorLine cterm=bold ctermfg=green ctermbg=blue
        " highlight cursorColumn cterm=bold ctermfg=green ctermbg=yellow
        " highlight cursorColumn ctermbg=green ctermfg=green

        nmap <A-j> mz:m+<cr>`z
        " dot æ–‡ä»¶ç”Ÿæˆå¹¶é¢„è§ˆ
        " :autocmd BufRead,BufNewFile *.dot map <F5> :w<CR>:!dot -Tjpg -o %<.jpg % && eog %<.jpg  <CR><CR> && exec "redr!"

        " æ²¡sudoå´æƒ³ä¿å­˜
        cmap w!! w !sudo tee % >/dev/null

        "è®¾ç½®é¼ æ ‡ç²˜è´´æ¨¡å¼
        nnoremap <leader>mo :call SET_MOUSE()<cr>

        "ä½¿ç”¨,væ¥é€‰æ‹©åˆšåˆšå¤åˆ¶çš„æ®µè½ï¼Œè¿™æ ·å¯ä»¥ç”¨æ¥ç¼©è¿›
        " nnoremap <leader>v v`]

        " æ¸…é™¤å‰é¢æ•°å­—åŠ . exaple 12.aaa-->aaa ä¸é€‚åˆä»£ç ï¼ï¼ï¼
        " nnoremap ff :1,$s///g

        "=====================================================
        map <leader>e :e! ~/.vimrc<cr>
        nnoremap <C-]> g]
        map <C-]> g]
        " gd ä»£æ›¿ *
        " g] ä»£æ›¿ C-]
        "=====================================================
        " æŸ¥æ‰¾å†²çªçš„åœ°æ–¹
        " ========>>> ...
        map <leader>fc /\v^[<\|=>]{7}( .*\|$)<CR>
        "=====================================================
    " my map end }}}

    " autocmd {{{
        "è‡ªåŠ¨è½½å…¥é…ç½®æ–‡ä»¶ä¸éœ€è¦é‡å¯
        autocmd! bufwritepost .vimrc source %
        "=====================================================
        autocmd WinEnter * if &buftype ==#'quickfix' && winnr('$') == 1 | quit |endif
        "=====================================================
        autocmd BufEnter * :syntax sync fromstart
        autocmd WinLeave * lclose
        "=====================================================
        if isdirectory($HOME."/.vim/bundle/wim")
            autocmd BufEnter * call CHECK_FILETYPE()
        endif

        autocmd BufRead *.h set filetype=c
        autocmd BufRead *.help set filetype=markdown
        "=====================================================
    " autocmd end }}}

    " å® {{{
        "å®å½•åˆ¶ç›¸å…³
        " q+<register> å¼€å§‹è®°å½•å‘½ä»¤, <register> æŒ‡ç”¨æˆ·è‡ªå·±å®šä¹‰çš„a-zä¸­çš„ä¸€ä¸ªå¯„å­˜å™¨
        " q å®Œæˆè®°å½•ï¼Œé€€å‡ºè®°å½•
        " æ‰§è¡Œè¿™ä¸ªå®å¯ä»¥ç”¨å‘½ä»¤ï¼š         @a
        " ä¹Ÿå¯ä»¥åŠ ä¸Šæ‰§è¡Œæ¬¡æ•°ï¼š           10@a æ‰§è¡Œ10æ¬¡
        " å½“ä½ æ‰§è¡Œè¿‡ä¸€æ¬¡@aä¹‹åï¼Œä½ å¯ä»¥ç”¨@@æ¥é‡å¤æ‰§è¡Œ@a
        " ä¿®æ”¹å®
        " 1ã€æ‰¾ä¸ªç©ºç™½è¡Œ
        " 2ã€ä½¿ç”¨å‘½ä»¤"apä¼šçœ‹åˆ°å¯„å­˜å™¨aä¸­çš„å‘½ä»¤å®åƒæ–‡æœ¬ä¸€æ ·å‡ºç°åœ¨è¿™ä¸€è¡Œï¼Œç„¶åç¼–è¾‘è¿™ä¸€è¡Œã€‚ç¼–ç¼–è¾‘ç»“æŸåå›åˆ°è¡Œé¦–ã€‚
        " 3ã€ç„¶åç”¨"ay$å°†æ­£ç¡®å†…å®¹å†™åˆ°å¯„å­˜å™¨aä¸­ï¼Œæœ€ååˆ é™¤è¿™ä¸€è¡Œå³å¯ã€‚
        " 4ã€å½“ä½ éœ€è¦å‘å‘½ä»¤å®å¯„å­˜å™¨ä¸­å¢åŠ å†…å®¹æ—¶ï¼Œå¯ä»¥ç”¨å‘½ä»¤qAæ¥å‘aå¯„å­˜å™¨å¢åŠ å†…å®¹ï¼Œä¹‹åè¾“å…¥ä½ æƒ³å¢åŠ çš„å†…å®¹ï¼Œå†ä½¿ç”¨qç»“æŸã€‚
        " ä¿å­˜å’Œä¼ é€’å®
        " 1 å…ˆå»ºç«‹ä¸€ä¸ªå®ã€‚å¦‚ä¸Š
        " 2 åœ¨ä»»æ„ä¸€ä¸ªæ–‡ä»¶çš„ç©ºç™½ä½ç½®normalçŠ¶æ€ä¸‹ï¼Œå‘½ä»¤"ap å³å¯ä»¥æŠŠå®çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚æ¯”å¦‚è¯´æˆ‘çš„å®æ˜¯ï¼š"ohello th id<80>kb<80>kb<80>kbis is a a<80>kba<80>kbmaco of vim.^["
        " 3 è¿™æ®µå†…å®¹ä¿å­˜æˆ–ä¼ é€’ã€‚
        " 4 ä½¿ç”¨å‘½ä»¤ï¼šlet @a="ohello th id<80>kb<80>kb<80>kbis is a a<80>kba<80>kbmaco of vim.^[" æˆ–è€…å‚è€ƒä¿®æ”¹å®çš„ç¬¬ä¸‰æ­¥ã€‚
        " 5 å…¶ä»–äººç”¨@aå‘½ä»¤å°±å¯ä»¥ä½¿ç”¨ä½ åˆ¶ä½œçš„å®äº†ã€‚
    " å® end }}}
    let @a="A \\j"
    let @b="A \j"
    let @c="vee3\j"

" }}}

    nmap <leader>d :%s/.*expand("<cword>").*\n//g<CR> "
" {{{
    " s: Find this C symbol 0æˆ–è€…s   â€”â€” æŸ¥æ‰¾è¿™ä¸ªCç¬¦å·
    nmap <C-\>s :call GO_GIT_DIR()<cr>:cs find s <C-R>=expand("<cword>")<CR><CR>
    " g: Find this definition 1æˆ–è€…g  â€”â€” æŸ¥æ‰¾è¿™ä¸ªå®šä¹‰
    nmap <C-\>g :call GO_GIT_DIR()<cr>:cs find g <C-R>=expand("<cword>")<CR><CR>
    " c: Find functions calling this function 3æˆ–è€…c  â€”â€” æŸ¥æ‰¾è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å‡½æ•°ï¼ˆä»¬ï¼‰
    nmap <C-\>c :call GO_GIT_DIR()<cr>:cs find c <C-R>=expand("<cword>")<CR><CR>
    " t: Find this text string 4æˆ–è€…t   â€”â€” æŸ¥æ‰¾è¿™ä¸ªå­—ç¬¦ä¸²
    nmap <C-\>t :call GO_GIT_DIR()<cr>:cs find t <C-R>=expand("<cword>")<CR><CR>
    " e: Find this egrep pattern 6æˆ–è€…e  â€”â€” æŸ¥æ‰¾è¿™ä¸ªegrepåŒ¹é…æ¨¡å¼
    nmap <C-\>e :call GO_GIT_DIR()<cr>:cs find e <C-R>=expand("<cword>")<CR><CR>
    " f: Find this file 7æˆ–è€…f   â€”â€” æŸ¥æ‰¾è¿™ä¸ªæ–‡ä»¶
    nmap <C-\>f :call GO_GIT_DIR()<cr>:cs find f <C-R>=expand("<cfile>")<CR><CR>
    " i: Find files #including this file 8æˆ–è€…i   â€”â€” æŸ¥æ‰¾#includeè¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶ï¼ˆä»¬ï¼‰
    nmap <C-\>i :call GO_GIT_DIR()<cr>:cs find i ^<C-R>=expand("<cfile>")<CR>$<CR>
    " d: Find functions called by this function 2æˆ–è€…d  â€”â€” æŸ¥æ‰¾è¢«è¿™ä¸ªå‡½æ•°è°ƒç”¨çš„å‡½æ•°ï¼ˆä»¬ï¼‰
    nmap <C-\>d :call GO_GIT_DIR()<cr>:cs find d <C-R>=expand("<cword>")<CR><CR>
    set cst
    set cspc=3

    nmap <F2> :set ic<cr>/
    nmap <S-C> :stj <C-R>=expand("<cword>")<CR><CR>
    " nmap ff :1,$s///g<LEFT><LEFT><LEFT>
    " imap <C-u> <esc>d0i
    " imap <C-k> <esc>d$i " ä¸è‡ªåŠ¨è¡¥å…¨ä¸­çš„ç»‘å®šå†²çª

    set modelines=1                   " seté¡¹çš„æ£€æŸ¥æ•°é‡??
    try
        call fuf#defineLaunchCommand('FufCWD', 'file', 'fnamemodify(getcwd(), ''%:p:h'')')
        map <leader>t :FufCWD **/<CR>
    catch
    endtry

    " -------------------------------------------------
    " æ’ç‰ˆ
    " set formatoptions=rqnl
    " set formatoptions=rqntc            " æ§åˆ¶ Vim å¦‚ä½•å¯¹æ–‡æœ¬è¿›è¡Œæ’ç‰ˆ
    " set formatoptions=tcrn2bmMB1j
    " set formatoptions+=mM             "è‡ªåŠ¨å¯¹ä¸­æ–‡æ¢è¡Œ
    " set formatoptions+=mB
    " set cindent                        " ä½¿ç”¨Cæ ·å¼çš„ç¼©è¿›
    " set cinoptions=:0                  " è®¾ç½® 'cindent' æ—¶å¦‚ä½•ç¼©è¿›
    " set smartindent                    " C ç¨‹åºæ™ºèƒ½è‡ªåŠ¨ç¼©è¿›
    " set fileformats=unix,dos,mac       " è‡ªåŠ¨è¯†åˆ«UNIXæ ¼å¼å’ŒMS-DOSæ ¼å¼     å‚ä¸è‡ªåŠ¨æ£€æµ‹çš„ 'fileformat' çš„æ ¼å¼
    " set fileformat=unix                " ä»¥UNIXçš„æ¢è¡Œç¬¦æ ¼å¼ä¿å­˜æ–‡ä»¶ï¼Œæ³¨æ„æ˜¯å»æ‰ä¸€ä¸ª^M
    " -------------------------------------------------
" }}}
    set viminfo+='1000,n$VTMP/.viminfo
" }}}
