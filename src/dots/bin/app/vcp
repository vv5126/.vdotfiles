#!/bin/bash

source $VLIBS/lib.misc
source $VLIBS/lib.list

if [ $# -eq 0 ]; then
	cat $VGL_DATA/vcp.vconf | sed -n '/^#/!p;' | showlist
	exit
fi

FILES="$@"
LAST="${!#}"

if [[ "$LAST" =~ "@" ]]; then # target
	DEST="$LAST"
	FILES="${FILES% *}"
	echo "$DEST" >> $VGL_DATA/vcp.vconf
else # normal file
	showlist_with_input $VGL_DATA/vcp.vconf "dest" "cp to" $@
	DEST="$dest"
	[ "$(is_num "$LAST")" -eq "1" ] && FILES="${FILES% *}"
fi

scp -r $FILES $DEST
