# ubuntu 常用功能整理

### auto-startup
* gnome-session-properties
* vpipedaemon
* gnome-panel

### 改capslock->ctrl
* sudo vim /etc/default/keyboard 修改下面这一行：XKBOPTIONS="ctrl:nocaps" # "ctrl:swapcaps"
* sudo dpkg-reconfigure keyboard-configuration 出现如下图像（全部选默认的)
unused: xmodmap /home/user/.Xmodmap
Ubuntu 14.04 下通过 XKB 修改键盘映射, 实现自定义按键
https://github.com/Chunlin-Li/Chunlin-Li.github.io/blob/master/blogs/linux/ubuntu-xkb-keyboard-remap.md

### add to local crontab
* crontab -e
/30 \*  \* \* \*   user /bin/tmsync
* sudo service cron restart
* sudo service cron status

### vsudoer
add vsudoer to /etc/sudoers use sudo visudo, or :
* sudo chgrp root vsudoer
* sudo chown root vsudoer
* sudo chmod 440 vsudoer
* sudo ln -Pf /home/user/.bin/local/vsudoer /etc/sudoers.d/

### add samba
* edit /etc/samba/smb.conf to add the smb-dir.
* use smbpasswd  -a xxx to add your user's name.
* service smb restart
****maybe unused:****
service  iptables stop
setenforce 0
vi /etc/selinux/config
change 'SELINUX=enforcing' to 'SELINUX=disabled'

### font setup
* add fonts to ~/.local/share/fonts
* mkfontscale
* mkfontdir
* fc-cache -vf
* rm ~/.vim/bundle/vim-powerline/*.cache

### Ubuntu取消自动更新命令
* vi /etc/apt/apt.conf.d/50unattended-upgrades
  Unattended-Upgrade::Allowed-Origins 全注释
* vi /etc/apt/apt.conf.d/10periodic
  APT::Periodic::Update-Package-Lists "1"; //显示更新包列表 0表示停用设置
  APT::Periodic::Download-Upgradeable-Packages "1"; //下载更新包 0表示停用设置
  APT::Periodic::AutocleanInterval "7"; // 7日自动删除
  APT::Periodic::Unattended-Upgrade "1"; //启用自动更新 0表示停用自动更新

### python
##### 安装app
* cd app
* python3.6 setup.py build --user
* python3.6 setup.py install

### 远程桌面
install xrdp
vncserver :1
cat > vim .vnc/xstartup << EOF
#!/bin/sh
export XKL_XMODMAP_DISABLE=1
unset SESSION_MANAGER
unset DBUS_SESSION_BUS_ADDRESS
gnome-panel &
gnome-settings-daemon &
metacity &
nautilus &
gnome-terminal &
EOF

vncserver -kill :1
vncserver :1

### ftp
install vsftpd
in /etc/vsftpd.conf:
        anonymous_enable=NO
        local_root=/home/linuxidc/公共的/FTP共享文件
        local_enable=YES

sudo service vsftpd restart

### tftp
* install tftpd-hpa
* install tftp-hpa（如果不需要客户端可以不安装）
* 配置TFTP服务器
sudo vim /etc/default/tftpd-hpa
将原来的内容改为:
TFTP_USERNAME="tftp"
TFTP_ADDRESS="0.0.0.0:69"
TFTP_DIRECTORY="tftp根目录" #服务器目录,需要设置权限为777,chomd 777
TFTP_OPTIONS="-l -c -s"
* 重新启动TFTP服务
sudo service tftpd-hpa restart

### remount
mount -o remount,rw /xxx

### QT
GL/gl.h: No such file or directory 执行下面命令解决：
sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev

### minicom
* 关闭log
在 ~/.minirc.dfl增加
pu logfname••••••••

### bcompare安装
wget http://www.scootersoftware.com/bcompare-4.1.9.21719_amd64.deb
sudo apt-get update
sudo apt-get install gdebi-core
sudo gdebi bcompare-4.1.9.21719_amd64.deb

cd /usr/lib/beyondcompare
sudo chmod 755 BCompare
sudo sed -i "s/keexjEP3t4Mue23hrnuPtY4TdcsqNiJL-5174TsUdLmJSIXKfG2NGPwBL6vnRPddT7tH29qpkneX63DO9ECSPE9rzY1zhThHERg8lHM9IBFT+rVuiY823aQJuqzxCKIE1bcDqM4wgW01FH6oCBP1G4ub01xmb4BGSUG6ZrjxWHJyNLyIlGvOhoY2HAYzEtzYGwxFZn2JZ66o4RONkXjX0DF9EzsdUef3UAS+JQ+fCYReLawdjEe6tXCv88GKaaPKWxCeaUL9PejICQgRQOLGOZtZQkLgAelrOtehxz5ANOOqCaJgy2mJLQVLM5SJ9Dli909c5ybvEhVmIC0dc9dWH+/N9KmiLVlKMU7RJqnE+WXEEPI1SgglmfmLc1yVH7dqBb9ehOoKG9UE+HAE1YvH1XX2XVGeEqYUY-Tsk7YBTz0WpSpoYyPgx6Iki5KLtQ5G-aKP9eysnkuOAkrvHU8bLbGtZteGwJarev03PhfCioJL4OSqsmQGEvDbHFEbNl1qJtdwEriR+VNZts9vNNLk7UGfeNwIiqpxjk4Mn09nmSd8FhM4ifvcaIbNCRoMPGl6KU12iseSe+w+1kFsLhX+OhQM8WXcWV10cGqBzQE9OqOLUcg9n0krrR3KrohstS9smTwEx9olyLYppvC0p5i7dAx2deWvM1ZxKNs0BvcXGukR+/g" BCompare
# key: GXN1eh9FbDiX1ACdd7XKMV7hL7x0ClBJLUJ-zFfKofjaj2yxE53xauIfkqZ8FoLpcZ0Ux6McTyNmODDSvSIHLYhg1QkTxjCeSCk6ARz0ABJcnUmd3dZYJNWFyJun14rmGByRnVPL49QH+Rs0kjRGKCB-cb8IT4Gf0Ue9WMQ1A6t31MO9jmjoYUeoUmbeAQSofvuK8GN1rLRv7WXfUJ0uyvYlGLqzq1ZoJAJDyo0Kdr4ThF-IXcv2cxVyWVW1SaMq8GFosDEGThnY7C-SgNXW30jqAOgiRjKKRX9RuNeDMFqgP2cuf0NMvyMrMScnM1ZyiAaJJtzbxqN5hZOMClUTE+++

### 以HTTP的方式共享当前文件夹的文件
$ python -m SimpleHTTPServer

### 执行命令前用你最喜欢的编辑器来编辑命令
command <C-x C-e>

talnet xxx 端口 
dos2unix 可以将dos下的脚本格式化为unix下的。

### autotools 常用命令
aclocal 缺少宏定义时使用
autoscan 生成configure.ac
autoconf 生成configure
automake --add-missing 如果缺少install.sh等执行
./configure --prefix ~/.local
make && make install

### ssh 常用命令
ssh-copy-id

"Agent admitted failure to sign using the key.
ssh-add ~/.ssh/id_rsa

ssh-keygen -t rsa

sudo apt-get install libevent-dev      #如果成功安装就跳去第6步, 如果提示安装冲突(xxxx冲突  libevent-2.0-5 xxxxx), 就执行如下步骤:
sudo dpkg --purge --force-depends  libevent-2.0-5    # 这里的 libevent-2.0-5 按照自己系统提示是什么冲突, 就改成什么
sudo apt-get install  libevent-dev      #如果成功安装就跳去第6步, 失败就执行如下步骤
sudo apt-get install -f               # 自动修复依赖关系
sudo apt-get install libevent-dev    #  到这里应该就可以顺利安装libevent库了

<!-- 安装普通用户程序,最好先导出如下环境 -->
export PREFIX="$HOME"/.local
export LDFLAGS=-L$PREFIX/lib
export CFLAGS="-g -I$PREFIX/include"
export CPPFLAGS="-g -I$PREFIX/include"
export PKG_CONFIG_PATH=$PREFIX/lib/pkgconfig


在平时工作中，有时候需要SSH登陆到别的Linux主机上去，但有时候SSH登陆会被禁止，并弹出如下类似提示：
比较奇怪，于是研究了一下。 ssh会把你每个你访问过计算机的公钥(public key)都记录在~/.ssh/known_hosts。当下次访问相同计算机时，OpenSSH会核对公钥。如果公钥不同，OpenSSH会发出警告， 避免你受到DNS Hijack之类的攻击。
原因：一台主机上有多个Linux系统，会经常切换，那么这些系统使用同一ip，登录过一次后就会把ssh信息记录在本地的~/.ssh/known_hsots文件中，切换该系统后再用ssh访问这台主机就会出现冲突警告，需要手动删除修改known_hsots里面的内容。
有以下两个解决方案：
1. 手动删除修改known_hsots里面的内容；
2. 修改配置文件“~/.ssh/config”，加上这两行，重启服务器。
   StrictHostKeyChecking no
   UserKnownHostsFile /dev/null
优缺点：
1. 需要每次手动删除文件内容，一些自动化脚本的无法运行（在SSH登陆时失败），但是安全性高；
2. SSH登陆时会忽略known_hsots的访问，但是安全性低；

cmake 使用
一般会在工程目录创建build, 然后cmake -D XXX -D XXX ..

opencv
cmake -D CMAKE_INSTALL_PREFIX=~/.local BUILD_TIFF=ON ..

利用依赖方式




### 中文乱码解决
iconv -f gb2312 -t utf-8 xxx > xxx
